# 프로젝트 기능 정의서 (Functional Specification)

## 1. 프로젝트 개요

- **프로젝트명:** Green Signal (식품 안전 및 맞춤형 건강 관리 플랫폼)
- **목적:** 사용자의 건강 정보(알레르기, 질병)를 기반으로 식품의 안전성을 실시간으로 분석하고, 개인 맞춤형 경고 및 제품 추천을 제공하여 안전한 식생활을 지원함.
- **플랫폼:** Web / Android App (Hybrid)

---

## 2. 주요 기능 목록

### 2.1 사용자 관리 (User Management)

| 기능 ID | 기능명               | 상세 설명                                                                           | 비고                    |
| :-----: | :------------------- | :---------------------------------------------------------------------------------- | :---------------------- |
|  U-01   | **회원가입**         | 이메일, 비밀번호, 닉네임 입력을 통한 자체 회원가입 기능.                            | 정규식 검사 포함        |
|  U-02   | **로그인**           | 자체 계정(이메일) 로그인 및 JWT 토큰 기반 인증 관리.                                | 자동 로그인 지원        |
|  U-03   | **소셜 로그인**      | Google, Kakao OAuth 연동을 통한 간편 로그인/회원가입.                               | Passport.js 사용        |
|  U-04   | **건강 프로필 설정** | 사용자의 알레르기(우유, 땅콩 등) 및 보유 질병(당뇨, 고혈압 등) 정보를 설정 및 수정. | 분석 로직의 핵심 데이터 |
|  U-05   | **비밀번호 찾기**    | 이메일 인증을 통한 임시 비밀번호 발급.                                              |                         |
|  U-06   | **마이페이지**       | 닉네임 변경, 프로필 이미지 수정, 계정 탈퇴 등 회원 정보 관리.                       |                         |

### 2.2 식품 검색 및 조회 (Search & View)

| 기능 ID | 기능명             | 상세 설명                                                            | 비고                    |
| :-----: | :----------------- | :------------------------------------------------------------------- | :---------------------- |
|  S-01   | **키워드 검색**    | 제품명, 제조사 등 키워드를 통한 식품 검색.                           |                         |
|  S-02   | **바코드 스캔**    | 스마트폰 카메라를 이용한 실시간 바코드 인식 및 제품 자동 조회.       | html5-qrcode 라이브러리 |
|  S-03   | **검색 히스토리**  | 최근 검색한 제품 목록 및 스캔 내역 자동 저장 및 조회.                | DB 연동 (최대 20개)     |
|  S-04   | **상세 정보 조회** | 제품명, 이미지, 용량, 바코드 번호, 품목 보고 번호 등 기본 스펙 제공. |                         |

### 2.3 맞춤형 안전 분석 (Personalized Safety Analysis)

| 기능 ID | 기능명                 | 상세 설명                                                                                                        | 비고                       |
| :-----: | :--------------------- | :--------------------------------------------------------------------------------------------------------------- | :------------------------- |
|  A-01   | **알레르기 경고**      | 사용자가 보유한 알레르기 성분이 제품에 포함된 경우, 상세 페이지 최상단에 **🚨 빨간색 경고 카드** 노출.           | DB 매핑 + 텍스트 정밀 분석 |
|  A-02   | **질병 기반 경고**     | 당뇨, 고혈압 등 질병 보유 시 위험 성분(나트륨, 당류 등) 함유 여부를 분석하여 경고(WARN/INFO).                    |                            |
|  A-03   | **원재료 텍스트 분석** | DB에 정형화되지 않은 성분도 **원재료명 텍스트**를 실시간 파싱하여 감지. (예: '1A등급 원유' → 우유 알레르기 처리) | 정규식/키워드 매칭         |
|  A-04   | **영양성분 분석**      | 영양정보 텍스트에서 당류, 탄수화물 등의 유무를 파악하여 당뇨 환자 등에게 주의 메시지 제공.                       |                            |
|  A-05   | **통합 안전 등급**     | 개인별 분석 결과에 따라 '안전', '주의', '위험' 등의 직관적인 상태 표시.                                          |                            |

### 2.4 추천 시스템 (Recommendation System)

| 기능 ID | 기능명                  | 상세 설명                                                                     | 비고                     |
| :-----: | :---------------------- | :---------------------------------------------------------------------------- | :----------------------- |
|  R-01   | **대체/유사 상품 추천** | 현재 보고 있는 상품과 유사한 성분/카테고리의 다른 안전한 제품 추천.           | Flask 서버(AI 모델) 연동 |
|  R-02   | **유해 성분 필터링**    | 추천 결과에서 사용자의 알레르기/질병 유발 성분이 포함된 제품은 자동으로 제외. | 안전 최우선 로직         |

### 2.5 커뮤니티 및 유틸리티 (Community & Utility)

| 기능 ID | 기능명             | 상세 설명                                                                | 비고 |
| :-----: | :----------------- | :----------------------------------------------------------------------- | :--- |
|  C-01   | **즐겨찾기**       | 자주 찾는 제품을 '관심 상품'으로 등록하여 빠르게 접근.                   |      |
|  C-02   | **스캔 기록 관리** | 과거에 스캔했던 제품들의 안전성 결과(OK/Warning)를 타임라인 형태로 확인. |      |

---

## 3. 시스템 아키텍처 요약

- **Frontend:** React (Vite), Capacitor (Android 배포용), CSS (Glassmorphism UI)
- **Backend:** Node.js (Express), MySQL (데이터 관리)
- **AI Server:** Flask (Python, scikit-learn 기반 추천 알고리즘)
- **Infra:** 로컬 개발 환경 (IP: 192.168.219.74 통신)

## 4. 데이터베이스 주요 테이블

- `users`: 사용자 기본 정보
- `products`: 식품 상세 정보 (원재료, 영양성분 텍스트 등)
- `user_allergens` / `user_diseases`: 사용자 건강 프로필
- `product_allergens`: 제품별 알레르기 매핑 정보
- `scan_history`: 사용자 스캔 이력 로그
- `favorites`: 즐겨찾기 목록
